<script>
  let userId = "";

  const main = async () => {
    await liff.init({ liffId: "2005387694-RmynZd5l" });
    if (liff.isLoggedIn()) {
      const profile = await liff.getProfile();

      profileImage.src = profile.pictureUrl;
      profileName.innerText = profile.displayName;
      profileUID.innerText = profile.userId;

      userId = profile.userId;
      lineprofile.style.display = "block";
    } else {
      liff.login();
    }
  };

  const logOut = () => {
    liff.logout();
    window.location.reload();
  };

  const sendMessage = async () => {
    try {
        if (!lineMessage.value){
            throw new Error('message not found');
        }
        const response = await axios.post('https://your-deployed-backend-url/send-message', { // Use the URL from Vercel deployment
            userId,
            message: lineMessage.value
        });
        console.log('response', response.data);
    } catch (error){
        console.log('error', error);
    }
  };

  main();
</script>
